<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f8f9fa;
            font-family: 'Poppins', sans-serif;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            margin-top: 15px;
        }
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .card-header {
            font-size: 1.75rem;
            text-align: center;
            background-color: #0062cc;
            color: white;
            padding: 20px;
            font-weight: bold;
            border-bottom: 5px solid #0056b3;
        }
        .card-body {
            padding: 30px;
            background: white;
        }
        .form-control {
            background-color: #f0f0f0;
            border: none;
            border-radius: 10px;
            padding: 15px;
            color: #333;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .form-control:focus {
            box-shadow: 0 0 10px rgba(0, 98, 204, 0.5);
            border: 1px solid #0062cc;
            background-color: #e9ecef;
        }
        .form-group label {
            font-weight: bold;
            color: #333;
        }
        .btn-primary {
            width: 100%;
            background-color: #0062cc;
            border: none;
            padding: 12px;
            font-size: 1.25rem;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #0056b3;
            box-shadow: 0 4px 15px rgba(0, 98, 204, 0.3);
            transform: translateY(-3px);
        }
        .result {
            text-align: center;
            margin-top: 30px;
            font-size: 1.5rem;
            color: #0062cc;
            font-weight: bold;
        }
        hr {
            border-top: 2px solid #f0f0f0;
        }
        @media (max-width: 767px) {
            .card-body {
                padding: 20px;
            }
            .btn-primary {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="card-header">
                Mortgage Payment Calculator
            </div>
<form action="/calculate" method="post">
    <div class="card-body">
        <div class="form-group mb-4">
            <label for="price">Price</label>
            <input type="number" class="form-control" id="price" name="price" value="<%= typeof price !== 'undefined' && price !== null ? price : '' %>" placeholder="Enter amount" step="0.01" required>
        </div>
        <hr>
        <div class="form-group mb-4">
            <label for="down_payment">Down payment (%)</label>
            <input type="number" class="form-control" id="down_payment" name="down_payment" value="<%= typeof downPaymentPercentage !== 'undefined' && downPaymentPercentage !== null ? downPaymentPercentage : '' %>" placeholder="Enter percentage" step="0.01" required>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-4 form-group mb-4">
                <label for="amortization">Amortization (Years)</label>
                <select class="form-control" id="amortization" name="amortization">
                    <option value="1" <%= amortization == 1 ? 'selected' : '' %>>1</option>
                    <option value="2" <%= amortization == 2 ? 'selected' : '' %>>2</option>
                    <option value="3" <%= amortization == 3 ? 'selected' : '' %>>3</option>
                    <option value="4" <%= amortization == 4 ? 'selected' : '' %>>4</option>
                    <option value="5" <%= amortization == 5 ? 'selected' : '' %>>5</option>
                    <option value="6" <%= amortization == 6 ? 'selected' : '' %>>6</option>
                    <option value="7" <%= amortization == 7 ? 'selected' : '' %>>7</option>
                    <option value="8" <%= amortization == 8 ? 'selected' : '' %>>8</option>
                    <option value="9" <%= amortization == 9 ? 'selected' : '' %>>9</option>
                    <option value="10" <%= amortization == 10 ? 'selected' : '' %>>10</option>
                    <option value="11" <%= amortization == 11 ? 'selected' : '' %>>11</option>
                    <option value="12" <%= amortization == 12 ? 'selected' : '' %>>12</option>
                    <option value="13" <%= amortization == 13 ? 'selected' : '' %>>13</option>
                    <option value="14" <%= amortization == 14 ? 'selected' : '' %>>14</option>
                    <option value="15" <%= amortization == 15 ? 'selected' : '' %>>15</option>
                    <option value="16" <%= amortization == 16 ? 'selected' : '' %>>16</option>
                    <option value="17" <%= amortization == 17 ? 'selected' : '' %>>17</option>
                    <option value="18" <%= amortization == 18 ? 'selected' : '' %>>18</option>
                    <option value="19" <%= amortization == 19 ? 'selected' : '' %>>19</option>
                    <option value="20" <%= amortization == 20 ? 'selected' : '' %>>20</option>
                    <option value="21" <%= amortization == 21 ? 'selected' : '' %>>21</option>
                    <option value="22" <%= amortization == 22 ? 'selected' : '' %>>22</option>
                    <option value="23" <%= amortization == 23 ? 'selected' : '' %>>23</option>
                    <option value="24" <%= amortization == 24 ? 'selected' : '' %>>24</option>
                    <option value="25" <%= amortization == 25 ? 'selected' : '' %>>25</option>
                    <option value="26" <%= amortization == 26 ? 'selected' : '' %>>26</option>
                    <option value="27" <%= amortization == 27 ? 'selected' : '' %>>27</option>
                    <option value="28" <%= amortization == 28 ? 'selected' : '' %>>28</option>
                    <option value="29" <%= amortization == 29 ? 'selected' : '' %>>29</option>
                    <option value="30" <%= amortization == 30 ? 'selected' : '' %>>30</option>
                </select>
            </div>
            <div class="col-md-4 form-group mb-4">
                <label for="mortgage_rate">Mortgage rate (%)</label>
                <input type="number" class="form-control" id="mortgage_rate" value="<%= typeof mortgageRate !== 'undefined' && mortgageRate !== null ? mortgageRate : '4.29' %>" name="mortgage_rate" placeholder="Enter rate" step="0.01" required>
            </div>

            <div class="col-md-4 form-group mb-4">
                <label for="payment_frequency">Payment frequency</label>
                <select class="form-control" id="payment_frequency" name="payment_frequency">
                    <option value="Monthly" <%= paymentFrequency == 'Monthly' ? 'selected' : '' %>>Monthly</option>
                    <option value="Bi-weekly" <%= paymentFrequency == 'Bi-weekly' ? 'selected' : '' %>>Bi-weekly</option>
                    <option value="Weekly" <%= paymentFrequency == 'Weekly' ? 'selected' : '' %>>Weekly</option>
                    <option value="Annually" <%= paymentFrequency == 'Annually' ? 'selected' : '' %>>Annually</option>
                </select>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-12 text-center">
                <button type="submit" class="btn btn-primary">Calculate</button>
            </div>
        </div>
    </div>
</form>

            <% if (error) { %>
                <div class="alert alert-danger text-center">
                  <%= error %>
                </div>
              <% } %>
              
            <% if (payment !== null) { %>
            <div class="result">
                <p>Price - Down payment + CMHC insurance = Total Mortgage</p>
                <p>$<%= price %> - $<%= downPayment %> + $<%= cmhcInsurance %> = $<%= insuredMortgage.toFixed(2) %></p>
                <br>
                <p>Total Mortgage: $<%=  insuredMortgage.toFixed(2) %></p>
                <p><%= paymentFrequency %> Payment: $<%=  payment.toFixed(2) %></p>
            </div>
            <% } %>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
